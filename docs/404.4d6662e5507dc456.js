"use strict";(self.webpackChunkshopping_app=self.webpackChunkshopping_app||[]).push([[404],{8404:(w,m,i)=>{i.r(m),i.d(m,{AccountModule:()=>U});var c=i(1590),o=i(1223);let f=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-account"]],decls:2,vars:0,template:function(n,e){1&n&&(o.TgZ(0,"p"),o._uU(1,"account works!"),o.qZA())},styles:[""]}),t})();var u=i(2382),g=i(1661),d=i(7556),l=i(9808);function h(t,r){1&t&&(o.TgZ(0,"div"),o._uU(1,"Username is required"),o.qZA())}function v(t,r){if(1&t&&(o.TgZ(0,"div",18),o.YNc(1,h,2,0,"div",19),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.loginForm.controls.userName.errors.required)}}function b(t,r){1&t&&(o.TgZ(0,"div"),o._uU(1,"Password is required"),o.qZA())}function Z(t,r){if(1&t&&(o.TgZ(0,"div",18),o.YNc(1,b,2,0,"div",19),o.qZA()),2&t){const n=o.oxw();o.xp6(1),o.Q6J("ngIf",n.loginForm.controls.password.errors.required)}}function L(t,r){1&t&&o._UZ(0,"span",20)}const p=function(t){return{"is-invalid":t}},S=function(){return["/account","sign-up"]};let C=(()=>{class t extends g.H{constructor(n,e,s,a){super(),this.route=n,this.router=e,this.authService=s,this.fb=a,this.loginInProgress=!1,this.redirectTo="/"}ngOnInit(){this.prepareLoginForm(),this.redirectTo=this.route.snapshot.queryParamMap.get("redirectTo")||"/"}prepareLoginForm(){this.loginForm=this.fb.group({userName:["",u.kI.required],password:["",u.kI.required]})}onLoginFormSubmit(){this.loginInProgress=!0;const n=this.loginForm.value;this.subscribers.checkLoginSub=this.authService.checkLogin(n.userName,n.password).subscribe(e=>{e?(e.isLoggedIn=!0,this.authService.login(e),this.router.navigate([this.redirectTo])):this.loginInProgress=!1},e=>{this.loginInProgress=!1})}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.gz),o.Y36(c.F0),o.Y36(d.e),o.Y36(u.qu))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],features:[o.qOj],decls:27,vars:13,consts:[[1,"container-fluid","mt-5"],[1,"row"],[1,"col-3"],[1,"col-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],["lgnForm","ngForm"],[1,"form-group"],["for","username"],["type","text","formControlName","userName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],[1,"btn","btn-link",3,"routerLink"],[1,"invalid-feedback"],[4,"ngIf"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(n,e){if(1&n&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"div",2),o.TgZ(3,"div",3)(4,"div",4)(5,"h4",5),o._uU(6,"Login"),o.qZA(),o.TgZ(7,"div",6)(8,"form",7,8),o.NdJ("ngSubmit",function(){return e.onLoginFormSubmit()}),o.TgZ(10,"div",9)(11,"label",10),o._uU(12,"Username"),o.qZA(),o._UZ(13,"input",11),o.YNc(14,v,2,1,"div",12),o.qZA(),o.TgZ(15,"div",9)(16,"label",13),o._uU(17,"Password"),o.qZA(),o._UZ(18,"input",14),o.YNc(19,Z,2,1,"div",12),o.qZA(),o.TgZ(20,"div",9)(21,"button",15),o.YNc(22,L,1,0,"span",16),o._uU(23," Login "),o.qZA(),o.TgZ(24,"a",17),o._uU(25,"Not registered? Register here"),o.qZA()()()()()(),o._UZ(26,"div",2),o.qZA()()),2&n){const s=o.MAs(9);o.xp6(8),o.Q6J("formGroup",e.loginForm),o.xp6(5),o.Q6J("ngClass",o.VKq(8,p,s.submitted&&e.loginForm.controls.userName.errors)),o.xp6(1),o.Q6J("ngIf",s.submitted&&e.loginForm.controls.userName.errors),o.xp6(4),o.Q6J("ngClass",o.VKq(10,p,s.submitted&&e.loginForm.controls.password.errors)),o.xp6(1),o.Q6J("ngIf",s.submitted&&e.loginForm.controls.password.errors),o.xp6(2),o.Q6J("disabled",e.loginInProgress),o.xp6(1),o.Q6J("ngIf",e.loginInProgress),o.xp6(2),o.Q6J("routerLink",o.DdM(12,S))}},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,l.mk,l.O5,c.yS],styles:[""]}),t})();var T=i(3087),A=i(2077),F=i(6928);const I=[{path:"",component:f},{path:"login",component:C},{path:"sign-up",component:(()=>{class t extends g.H{constructor(n,e,s,a){super(),this.route=n,this.router=e,this.authService=s,this.userService=a,this.redirectTo="/",this.showSubmitLoader=!1}ngOnInit(){}onRegistrationFormSubmit(n){!n||(n.role=T.u.USER,this.subscribers.addUserSub=this.userService.addUser(n).subscribe(e=>{!e||(this.subscribers.checkLoginSub=this.authService.checkLogin(n.userName,n.password).subscribe(s=>{this.showSubmitLoader=!1,alert("Registration "+(e?"successfull":"failed")+"."),s&&(s.isLoggedIn=!0,this.authService.login(s),this.router.navigate([this.redirectTo]))},s=>{this.showSubmitLoader=!1}))}))}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(c.gz),o.Y36(c.F0),o.Y36(d.e),o.Y36(A.K))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-registration"]],features:[o.qOj],decls:1,vars:1,consts:[[3,"showSubmitLoader","onFormSubmit"]],template:function(n,e){1&n&&(o.TgZ(0,"app-user-registration-form",0),o.NdJ("onFormSubmit",function(a){return e.onRegistrationFormSubmit(a)}),o.qZA()),2&n&&o.Q6J("showSubmitLoader",e.showSubmitLoader)},directives:[F.Y],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[c.Bz.forChild(I)],c.Bz]}),t})();var J=i(4466);let U=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[J.m,y]]}),t})()}}]);