"use strict";(self.webpackChunkshopping_app=self.webpackChunkshopping_app||[]).push([[592],{4466:(f,g,i)=>{i.d(g,{m:()=>c});var r=i(9808),s=i(2382),m=i(1590),l=i(1223);let c=(()=>{class u{}return u.\u0275fac=function(p){return new(p||u)},u.\u0275mod=l.oAB({type:u}),u.\u0275inj=l.cJS({imports:[[r.ez,s.u5,s.UX,m.Bz],r.ez,s.u5,s.UX]}),u})()},6928:(f,g,i)=>{i.d(g,{Y:()=>E});var r=i(1223),s=i(2382),m=i(3087),l=i(5347),c=i(1661),u=i(2077),_=i(9808),p=i(1590);function v(e,n){1&e&&(r.TgZ(0,"div"),r._uU(1," Username is required "),r.qZA())}function U(e,n){if(1&e&&(r.TgZ(0,"div",23),r.YNc(1,v,2,0,"div",24),r.qZA()),2&e){const o=r.oxw();r.xp6(1),r.Q6J("ngIf",o.userRegistrationForm.controls.userName.errors.required)}}function R(e,n){1&e&&(r.TgZ(0,"div"),r._uU(1," Last Name is required "),r.qZA())}function b(e,n){if(1&e&&(r.TgZ(0,"div",23),r.YNc(1,R,2,0,"div",24),r.qZA()),2&e){const o=r.oxw();r.xp6(1),r.Q6J("ngIf",o.userRegistrationForm.controls.lastName.errors.required)}}function Z(e,n){1&e&&(r.TgZ(0,"div"),r._uU(1," Password is required "),r.qZA())}function F(e,n){if(1&e&&(r.TgZ(0,"div",23),r.YNc(1,Z,2,0,"div",24),r.qZA()),2&e){const o=r.oxw();r.xp6(1),r.Q6J("ngIf",o.userRegistrationForm.controls.password.errors.required)}}function h(e,n){1&e&&(r.TgZ(0,"div"),r._uU(1," Role is required "),r.qZA())}function T(e,n){if(1&e&&(r.TgZ(0,"div",23),r.YNc(1,h,2,0,"div",24),r.qZA()),2&e){const o=r.oxw(2);r.xp6(1),r.Q6J("ngIf",o.userRegistrationForm.controls.role.errors.required)}}const d=function(e){return{"is-invalid":e}};function A(e,n){if(1&e&&(r.TgZ(0,"div",9)(1,"label",25),r._uU(2,"Role:"),r.qZA(),r.TgZ(3,"select",26)(4,"option",27),r._uU(5,"Select Role"),r.qZA(),r.TgZ(6,"option",28),r._uU(7,"Admin"),r.qZA(),r.TgZ(8,"option",29),r._uU(9,"User"),r.qZA()(),r.YNc(10,T,2,1,"div",12),r.qZA()),2&e){const o=r.oxw(),t=r.MAs(9);r.xp6(3),r.Q6J("ngClass",r.VKq(2,d,t.submitted&&o.userRegistrationForm.controls.role.errors)),r.xp6(7),r.Q6J("ngIf",t.submitted&&o.userRegistrationForm.controls.role.errors)}}function C(e,n){1&e&&r._UZ(0,"span",30)}const I=function(){return["/account","login"]};function N(e,n){1&e&&(r.TgZ(0,"a",31),r._uU(1,"Already a user? Login"),r.qZA()),2&e&&r.Q6J("routerLink",r.DdM(1,I))}let E=(()=>{class e extends c.H{constructor(o,t){super(),this.fb=o,this.userService=t,this.userRegistrationForm=new s.cw({}),this.showSubmitLoader=!1,this.role=m.u.USER,this.title="Sign Up",this.onFormSubmit=new r.vpe,this.ROLE=m.u}ngOnInit(){this.userId||this.prepareUserRegistrationForm(new l.n)}ngOnChanges(o){o.userId&&o.userId.currentValue&&(this.subscribers.getUserSub=this.userService.getUser(this.userId).subscribe(t=>{!t||(this.user=t,this.prepareUserRegistrationForm(t))}))}prepareUserRegistrationForm(o){this.userRegistrationForm=this.fb.group({id:[o.id],userName:[o.userName,s.kI.required],firstName:[o.firstName],lastName:[o.lastName,s.kI.required],password:[o.password,s.kI.required],role:[o.role,this.role==m.u.ADMIN?[s.kI.required]:[s.kI.nullValidator]]})}onUserRegistrationFormSubmit(){this.showSubmitLoader=!0;const o=this.userRegistrationForm.value;this.subscribers.checkUniqueUserNameSub=this.userService.checkUniqueUserName(o.userName).subscribe(t=>{if(!t)return alert("User name already exists!"),void(this.showSubmitLoader=!1);this.validateForm(this.userRegistrationForm.controls)?this.onFormSubmit.emit(o):this.showSubmitLoader=!1})}validateForm(o){for(const t in o){const a=this.userRegistrationForm.controls[t];if(!a.valid&&a.hasValidator(s.kI.required))return alert(this.beautify(t)+" is requied!"),!1}return!0}}return e.\u0275fac=function(o){return new(o||e)(r.Y36(s.qu),r.Y36(u.K))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-user-registration-form"]],inputs:{showSubmitLoader:"showSubmitLoader",userId:"userId",role:"role",title:"title"},outputs:{onFormSubmit:"onFormSubmit"},features:[r.qOj,r.TTD],decls:36,vars:18,consts:[[1,"container-fluid","mt-5"],[1,"row"],[1,"col-3"],[1,"col-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup","ngSubmit"],["regForm","ngForm"],[1,"form-group"],["for","username"],["type","text","formControlName","userName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","firstName"],["type","text","formControlName","firstName",1,"form-control"],["for","lastName"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["for","password"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["class","form-group",4,"ngIf"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","btn btn-link",3,"routerLink",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],["for","role"],["formControlName","role","id","role",1,"form-control",3,"ngClass"],["value","","selected",""],["value","admin"],["value","user"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"btn","btn-link",3,"routerLink"]],template:function(o,t){if(1&o&&(r.TgZ(0,"div",0)(1,"div",1),r._UZ(2,"div",2),r.TgZ(3,"div",3)(4,"div",4)(5,"h4",5),r._uU(6),r.qZA(),r.TgZ(7,"div",6)(8,"form",7,8),r.NdJ("ngSubmit",function(){return t.onUserRegistrationFormSubmit()}),r.TgZ(10,"div",9)(11,"label",10),r._uU(12,"Username"),r.qZA(),r._UZ(13,"input",11),r.YNc(14,U,2,1,"div",12),r.qZA(),r.TgZ(15,"div",9)(16,"label",13),r._uU(17,"First Name"),r.qZA(),r._UZ(18,"input",14),r.qZA(),r.TgZ(19,"div",9)(20,"label",15),r._uU(21,"Last Name"),r.qZA(),r._UZ(22,"input",16),r.YNc(23,b,2,1,"div",12),r.qZA(),r.TgZ(24,"div",9)(25,"label",17),r._uU(26,"Password"),r.qZA(),r._UZ(27,"input",18),r.YNc(28,F,2,1,"div",12),r.qZA(),r.YNc(29,A,11,4,"div",19),r.TgZ(30,"div",9)(31,"button",20),r.YNc(32,C,1,0,"span",21),r._uU(33," Submit "),r.qZA(),r.YNc(34,N,2,2,"a",22),r.qZA()()()()(),r._UZ(35,"div",2),r.qZA()()),2&o){const a=r.MAs(9);r.xp6(6),r.Oqu(t.title),r.xp6(2),r.Q6J("formGroup",t.userRegistrationForm),r.xp6(5),r.Q6J("ngClass",r.VKq(12,d,a.submitted&&t.userRegistrationForm.controls.userName.errors)),r.xp6(1),r.Q6J("ngIf",a.submitted&&t.userRegistrationForm.controls.userName.errors),r.xp6(8),r.Q6J("ngClass",r.VKq(14,d,a.submitted&&t.userRegistrationForm.controls.lastName.errors)),r.xp6(1),r.Q6J("ngIf",a.submitted&&t.userRegistrationForm.controls.lastName.errors),r.xp6(4),r.Q6J("ngClass",r.VKq(16,d,a.submitted&&t.userRegistrationForm.controls.password.errors)),r.xp6(1),r.Q6J("ngIf",a.submitted&&t.userRegistrationForm.controls.password.errors),r.xp6(1),r.Q6J("ngIf",t.role==t.ROLE.ADMIN),r.xp6(2),r.Q6J("disabled",t.showSubmitLoader),r.xp6(1),r.Q6J("ngIf",t.showSubmitLoader),r.xp6(2),r.Q6J("ngIf","Sign Up"==t.title)}},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,_.mk,_.O5,s.EJ,s.YN,s.Kr,p.yS],styles:[""]}),e})()}}]);